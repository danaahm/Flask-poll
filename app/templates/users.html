{% extends "admin_base.html" %}

{% block content %}
<section class="admin-section">
	<div class="container">
		<div class="row text-center">
			<div class="col-lg-12">
				<h2 class="section-heading">Users</h2>
				<br>
				<br>
			</div>
		</div>
		
		<div class="row">
			<div class="col-lg-12">
				{% with messages = get_flashed_messages() %}
				{% for message in messages %}
				<div class="alert alert-secondary">
					{{ message }}
				</div><br>
				{% endfor %}
				{% endwith %}
				<table class="table table-striped">
						<thead>
								<tr>
									<th scope="col">Email</th>
									<th scope="col">Registered at</th>
									<th scope="col"># of votes</th>
									<th scope="col"></th>
								</tr>
							</thead>
					<tbody>
						{%for user in users%}
						<tr>
							<td>{{user.email}}</td>
							<td>{{user.registered_at.strftime("%d %b %H:%M")}} (UTC)</td>
							<td>{{user.votes.count()}}</td>
							<td style="text-align: right"><a class="btn btn-sm btn-danger" onclick="return confirm('Are you sure?')" href="{{url_for('delete_user',user_id=user.id)}}">Remove</a></td>
						</tr>
						{%endfor%}
						
					</tbody>
				</table>
			</div>
			
		</div><!-- row -->
		
	</div>
</section>
{% endblock %}